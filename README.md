wb-mqtt-adc
==========
Драйвер ADC запускается как сервис через system.d.
При запуске драйвер считывает конфигурацию для каналов с файла `/etc/wb-mqtt-adc.conf` и из `.conf` файлов в каталоге `/var/lib/wb-mqtt-adc/conf.d`. Приоритетными считаются настройки в `/etc/wb-mqtt-adc.conf`.
Ниже приведен пример конфигурационного файла с объяснением параметров.
```js

{
    // Под каким именем будет опубликовано устройство в MQTT
    // то есть ../meta/name ADCs
    "device_name" : "ADCs",
    "debug" : false,

    // Интервал публикации тех же самых значений в MQTT (опционально, по-умолчанию 60 с).
    // Независимо от настроек, значения публикуются в MQTT при любом изменении.
    "max_unchanged_interval" : 120,

    "iio_channels" : [
         {
                // под каким id будет публиковаться данный канал в MQTT
                // то есть /devices/wb-adc/controls/ID
                "id" : "A1",

                // указывает по скольки выборкам происходит усреднение значения
                "averaging_window": 1,

                // имя физического канала, указывает из какого файла будет читаться значение. 
                // В данном случае из /bus/iio/devices/iio:device0/in_voltage4_raw
                "channel_number" : "in_voltage4",

                // на этот множитель нужно умножить напряжение, измеренное АЦП, чтобы получить напряжение на входной клемме
                "voltage_multiplier" : 8.3917,

                // указывает сколько значащих цифр после запятой выводить у данного канала
                // по умолчанию 3
                "decimal_places" : 2,

                // указывает максимальное значение напряжениея (в вольтах), которое может быть измерено
                // на данном канале. Значения выше порога будут отброшены как некорректные.
		// Cледует задавать только для особых физических каналов.
                "max_voltage" : 15,

                // задаёт интервал опроса значений в миллисекундах (опционально, по умолчанию 700 мс)
                "poll_interval": 700,

                // задаёт интервал между выборками для усреднения (опционально, по умолчанию 10 мс)
                "delay_between_measurements": 10,
        },
        {
                "id" : "A2",
                "averaging_window": 1,
                "channel_number" : 2,
                "voltage_multiplier" : 8.3917,
                "decimal_places" : 2
        },
        {
                "id" : "A3",
                "averaging_window": 1,
                "channel_number" : 1,
                "voltage_multiplier" : 8.3917,
                "decimal_places" : 2
        },
        {
                "id" : "A4",
                "averaging_window": 1,
                "channel_number" : 3,
                "voltage_multiplier" : 8.3917,
                "decimal_places" : 2
        },
		{
                "id" : "Vin",
                "averaging_window": 1,
                "channel_number" : 8,
                "voltage_multiplier" : 8.3917,
                "decimal_places" : 2
        },
		{
                "id" : "5Vout",
                "averaging_window": 1,
                "channel_number" : 5,
                "voltage_multiplier" : 3.75,
                "decimal_places" : 2
        }
    ]
}
```

Драйвер ADC считывает с файла `ИМЯКАНАЛА_scale_available` (если он существует) возможные значения `scale`, максимальное из них записывается в файл
`ИМЯКАНАЛА_scale`. Множитель `scale` отвечает за перевод значений, считанных с `ИМЯКАНАЛА_raw` в вольты. Чем больше `scale`,
тем большее напряжение можно измерить на данном физическом канале.
